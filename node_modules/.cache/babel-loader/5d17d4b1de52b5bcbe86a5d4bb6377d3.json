{"ast":null,"code":"var _jsxFileName = \"D:\\\\Pro\\\\React\\\\tlt\\\\src\\\\components\\\\ToolbarWithResources.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Resource from './Resource';\nimport { changePhaseTo, placeResource, clearSelection, changeMessage, placeBuilding, feedCottages, newGame } from '../actions';\nimport { calcFedCottages } from './Buildings/scoring';\nimport { message, RESOURCE_PHASE, BUILDING_PHASE, FEEDING_PHASE, EMPTY_SQUARE, SCORING_PHASE } from './constants';\nimport '../css/resources.css';\n\nconst placeSelectedResource = props => {\n  props.placeResource();\n  props.clearSelection();\n  props.changePhaseTo(BUILDING_PHASE);\n  props.changeMessage(message.showPattern);\n};\n\nconst placeSelectedBuilding = props => {\n  props.placeBuilding();\n  props.changeMessage(message.successfulBuildingPlacement);\n};\n\nconst nextRound = props => {\n  switch (props.phase) {\n    case BUILDING_PHASE:\n      props.clearSelection(); //check is it empty squares\n\n      if (props.board.indexes.find(i => props.board[i] === EMPTY_SQUARE)) {\n        props.changePhaseTo(RESOURCE_PHASE); //   this.props.changeMessage(message.selectResource);\n      } else {\n        props.changeMessage(\"Переходим к кормежке?\");\n        props.feedCottages(calcFedCottages(props.board, props.buildings));\n        props.changePhaseTo(FEEDING_PHASE);\n      }\n\n      break;\n\n    case FEEDING_PHASE:\n      props.changePhaseTo(SCORING_PHASE);\n      props.changeMessage(\"Переходим к подсчету очков?\");\n      break;\n\n    case SCORING_PHASE:\n      props.changePhaseTo(BUILDING_PHASE);\n      props.changeMessage(\"начинаем новую игру\");\n      props.newGame();\n      break;\n\n    default:\n      props.changeMessage('зачем нажимать? - нужно лочить кнопку!!!');\n  }\n};\n\nconst renderActionHelper = props => {\n  if (props.phase === RESOURCE_PHASE) {\n    if (!props.selectedPawn.type && !props.selectedSquare) {\n      props.changeMessage(message.selectResourceAndPlace);\n    } else if (!props.selectedPawn.type) {\n      props.changeMessage(message.selectResource);\n    } else if (!props.selectedSquare) {\n      props.changeMessage(message.placeResource(props.selectedPawn.title.toLowerCase()));\n    } else {\n      props.changeMessage(message.confirmResourcePlacement(props.selectedPawn.title.toLowerCase()));\n      return React.createElement(\"button\", {\n        onClick: () => placeSelectedResource(props),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \" PLACE\");\n    }\n  } else {\n    if (props.selectedPawn.type >= 0 && props.selectedSquare) {\n      return React.createElement(React.Fragment, null, React.createElement(\"button\", {\n        onClick: () => nextRound(props),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"NEXT\"), React.createElement(\"button\", {\n        onClick: () => placeSelectedBuilding(props),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, \" PLACE\"));\n    }\n\n    return React.createElement(\"button\", {\n      onClick: () => nextRound(props),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"NEXT\");\n  }\n};\n\nconst renderButtons = props => {\n  //if board is full\n  if (!props.board.indexes.find(i => props.board[i] === EMPTY_SQUARE)) {\n    return React.createElement(\"button\", {\n      onClick: () => {\n        props.changeMessage(\"Переходим к кормежке?\");\n        props.feedCottages(calcFedCottages(props.board, props.buildings));\n        props.changePhaseTo(FEEDING_PHASE);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"NEXT\");\n  }\n\n  if (props.selectedSquare) {\n    if (props.selectedPawn.type === RESOURCE) {\n      return React.createElement(\"button\", {\n        onClick: () => placeSelectedResource(props),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \" PLACE RESOURCE\");\n    } else if (props.selectedPawn.type >= 0) {\n      return React.createElement(\"button\", {\n        onClick: () => placeSelectedBuilding(props),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \" PLACE BUILDING\");\n    }\n  }\n};\n\nconst ToolbarWithResources = props => {\n  return React.createElement(\"div\", {\n    className: \"resourceSelector\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }, \"Resources\", React.createElement(Resource, {\n    id: 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }), React.createElement(Resource, {\n    id: 1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }), React.createElement(Resource, {\n    id: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }), props.message, \" \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }), renderButtons(props), renderActionHelper(props));\n};\n\nconst mapStateToProps = state => {\n  return {\n    selectedPawn: state.selectedPawn,\n    selectedSquare: state.selectedSquare,\n    phase: state.phase,\n    board: state.board,\n    buildings: state.buildings,\n    message: state.message\n  };\n};\n\nexport default connect(mapStateToProps, {\n  changePhaseTo,\n  placeResource,\n  clearSelection,\n  changeMessage,\n  placeBuilding,\n  feedCottages,\n  newGame\n})(ToolbarWithResources);","map":{"version":3,"sources":["D:\\Pro\\React\\tlt\\src\\components\\ToolbarWithResources.js"],"names":["React","connect","Resource","changePhaseTo","placeResource","clearSelection","changeMessage","placeBuilding","feedCottages","newGame","calcFedCottages","message","RESOURCE_PHASE","BUILDING_PHASE","FEEDING_PHASE","EMPTY_SQUARE","SCORING_PHASE","placeSelectedResource","props","showPattern","placeSelectedBuilding","successfulBuildingPlacement","nextRound","phase","board","indexes","find","i","buildings","renderActionHelper","selectedPawn","type","selectedSquare","selectResourceAndPlace","selectResource","title","toLowerCase","confirmResourcePlacement","renderButtons","RESOURCE","ToolbarWithResources","mapStateToProps","state"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AAGA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,aAAT,EAAwBC,aAAxB,EAAuCC,cAAvC,EAAuDC,aAAvD,EAAsEC,aAAtE,EAAqFC,YAArF,EAAmGC,OAAnG,QAAkH,YAAlH;AACA,SAASC,eAAT,QAAgC,qBAAhC;AACA,SACIC,OADJ,EAEIC,cAFJ,EAGIC,cAHJ,EAIIC,aAJJ,EAKIC,YALJ,EAMIC,aANJ,QAOO,aAPP;AAQA,OAAO,sBAAP;;AAGA,MAAMC,qBAAqB,GAAGC,KAAK,IAAI;AACnCA,EAAAA,KAAK,CAACd,aAAN;AACAc,EAAAA,KAAK,CAACb,cAAN;AACAa,EAAAA,KAAK,CAACf,aAAN,CAAoBU,cAApB;AACAK,EAAAA,KAAK,CAACZ,aAAN,CAAoBK,OAAO,CAACQ,WAA5B;AACH,CALD;;AAOA,MAAMC,qBAAqB,GAAGF,KAAK,IAAI;AACnCA,EAAAA,KAAK,CAACX,aAAN;AACAW,EAAAA,KAAK,CAACZ,aAAN,CAAoBK,OAAO,CAACU,2BAA5B;AACH,CAHD;;AAKA,MAAMC,SAAS,GAAIJ,KAAD,IAAW;AACzB,UAAQA,KAAK,CAACK,KAAd;AAEI,SAAKV,cAAL;AACIK,MAAAA,KAAK,CAACb,cAAN,GADJ,CAEI;;AACA,UAAIa,KAAK,CAACM,KAAN,CAAYC,OAAZ,CAAoBC,IAApB,CAAyBC,CAAC,IAAIT,KAAK,CAACM,KAAN,CAAYG,CAAZ,MAAmBZ,YAAjD,CAAJ,EAAoE;AAChEG,QAAAA,KAAK,CAACf,aAAN,CAAoBS,cAApB,EADgE,CAEhE;AACH,OAHD,MAGO;AACHM,QAAAA,KAAK,CAACZ,aAAN,CAAoB,uBAApB;AACAY,QAAAA,KAAK,CAACV,YAAN,CACIE,eAAe,CAACQ,KAAK,CAACM,KAAP,EAAcN,KAAK,CAACU,SAApB,CADnB;AAGAV,QAAAA,KAAK,CAACf,aAAN,CAAoBW,aAApB;AACH;;AACD;;AAEJ,SAAKA,aAAL;AACII,MAAAA,KAAK,CAACf,aAAN,CAAoBa,aAApB;AACAE,MAAAA,KAAK,CAACZ,aAAN,CAAoB,6BAApB;AACA;;AAEJ,SAAKU,aAAL;AACIE,MAAAA,KAAK,CAACf,aAAN,CAAoBU,cAApB;AACAK,MAAAA,KAAK,CAACZ,aAAN,CAAoB,qBAApB;AACAY,MAAAA,KAAK,CAACT,OAAN;AACA;;AAEJ;AACIS,MAAAA,KAAK,CAACZ,aAAN,CAAoB,0CAApB;AA7BR;AA+BH,CAhCD;;AAkCA,MAAMuB,kBAAkB,GAAGX,KAAK,IAAI;AAChC,MAAIA,KAAK,CAACK,KAAN,KAAgBX,cAApB,EAAoC;AAChC,QAAI,CAACM,KAAK,CAACY,YAAN,CAAmBC,IAApB,IAA4B,CAACb,KAAK,CAACc,cAAvC,EAAuD;AACnDd,MAAAA,KAAK,CAACZ,aAAN,CAAoBK,OAAO,CAACsB,sBAA5B;AACH,KAFD,MAEO,IAAI,CAACf,KAAK,CAACY,YAAN,CAAmBC,IAAxB,EAA8B;AACjCb,MAAAA,KAAK,CAACZ,aAAN,CAAoBK,OAAO,CAACuB,cAA5B;AAEH,KAHM,MAGA,IAAI,CAAChB,KAAK,CAACc,cAAX,EAA2B;AAC9Bd,MAAAA,KAAK,CAACZ,aAAN,CAAoBK,OAAO,CAACP,aAAR,CAAsBc,KAAK,CAACY,YAAN,CAAmBK,KAAnB,CAAyBC,WAAzB,EAAtB,CAApB;AACH,KAFM,MAEA;AACHlB,MAAAA,KAAK,CAACZ,aAAN,CAAoBK,OAAO,CAAC0B,wBAAR,CAAiCnB,KAAK,CAACY,YAAN,CAAmBK,KAAnB,CAAyBC,WAAzB,EAAjC,CAApB;AAEA,aAAO;AAAQ,QAAA,OAAO,EAAE,MAAMnB,qBAAqB,CAACC,KAAD,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAP;AACH;AAEJ,GAdD,MAcO;AAEH,QAAIA,KAAK,CAACY,YAAN,CAAmBC,IAAnB,IAA2B,CAA3B,IAAgCb,KAAK,CAACc,cAA1C,EAA0D;AACtD,aACI,0CACI;AAAQ,QAAA,OAAO,EAAE,MAAMV,SAAS,CAACJ,KAAD,CAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAEI;AAAQ,QAAA,OAAO,EAAE,MAAME,qBAAqB,CAACF,KAAD,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ,CADJ;AAMH;;AACD,WAAO;AAAQ,MAAA,OAAO,EAAE,MAAMI,SAAS,CAACJ,KAAD,CAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AACH;AACJ,CA3BD;;AA6BA,MAAMoB,aAAa,GAAGpB,KAAK,IAAI;AAC3B;AAEA,MAAI,CAACA,KAAK,CAACM,KAAN,CAAYC,OAAZ,CAAoBC,IAApB,CAAyBC,CAAC,IAAIT,KAAK,CAACM,KAAN,CAAYG,CAAZ,MAAmBZ,YAAjD,CAAL,EAAqE;AACjE,WAAO;AAAQ,MAAA,OAAO,EAClB,MAAM;AACFG,QAAAA,KAAK,CAACZ,aAAN,CAAoB,uBAApB;AACAY,QAAAA,KAAK,CAACV,YAAN,CACIE,eAAe,CAACQ,KAAK,CAACM,KAAP,EAAcN,KAAK,CAACU,SAApB,CADnB;AAGAV,QAAAA,KAAK,CAACf,aAAN,CAAoBW,aAApB;AACH,OAPE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAP;AASH;;AAED,MAAGI,KAAK,CAACc,cAAT,EAAyB;AACrB,QAAId,KAAK,CAACY,YAAN,CAAmBC,IAAnB,KAA4BQ,QAAhC,EAA0C;AACtC,aAAO;AAAQ,QAAA,OAAO,EAAE,MAAMtB,qBAAqB,CAACC,KAAD,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAP;AACH,KAFD,MAEO,IAAIA,KAAK,CAACY,YAAN,CAAmBC,IAAnB,IAA2B,CAA/B,EAAkC;AACtC,aAAO;AAAQ,QAAA,OAAO,EAAE,MAAMX,qBAAqB,CAACF,KAAD,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAP;AACF;AACJ;AAIJ,CAzBD;;AA2BA,MAAMsB,oBAAoB,GAAGtB,KAAK,IAAI;AAClC,SACI;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEI,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAE,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGI,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAE,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHJ,EAII,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAE,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJJ,EAKKA,KAAK,CAACP,OALX,OAKoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALpB,EAOK2B,aAAa,CAACpB,KAAD,CAPlB,EAWKW,kBAAkB,CAACX,KAAD,CAXvB,CADJ;AAiBH,CAlBD;;AAoBA,MAAMuB,eAAe,GAAGC,KAAK,IAAI;AAC7B,SAAO;AACHZ,IAAAA,YAAY,EAAEY,KAAK,CAACZ,YADjB;AAEHE,IAAAA,cAAc,EAAEU,KAAK,CAACV,cAFnB;AAGHT,IAAAA,KAAK,EAAEmB,KAAK,CAACnB,KAHV;AAIHC,IAAAA,KAAK,EAAEkB,KAAK,CAAClB,KAJV;AAKHI,IAAAA,SAAS,EAAEc,KAAK,CAACd,SALd;AAMHjB,IAAAA,OAAO,EAAE+B,KAAK,CAAC/B;AANZ,GAAP;AAQH,CATD;;AAWA,eAAeV,OAAO,CAACwC,eAAD,EAAkB;AAAEtC,EAAAA,aAAF;AAAiBC,EAAAA,aAAjB;AAAgCC,EAAAA,cAAhC;AAAgDC,EAAAA,aAAhD;AAA+DC,EAAAA,aAA/D;AAA8EC,EAAAA,YAA9E;AAA4FC,EAAAA;AAA5F,CAAlB,CAAP,CAAgI+B,oBAAhI,CAAf","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nimport Resource from './Resource';\r\nimport { changePhaseTo, placeResource, clearSelection, changeMessage, placeBuilding, feedCottages, newGame } from '../actions';\r\nimport { calcFedCottages } from './Buildings/scoring';\r\nimport {\r\n    message,\r\n    RESOURCE_PHASE,\r\n    BUILDING_PHASE,\r\n    FEEDING_PHASE,\r\n    EMPTY_SQUARE,\r\n    SCORING_PHASE\r\n} from './constants';\r\nimport '../css/resources.css';\r\n\r\n\r\nconst placeSelectedResource = props => {\r\n    props.placeResource();\r\n    props.clearSelection();\r\n    props.changePhaseTo(BUILDING_PHASE);\r\n    props.changeMessage(message.showPattern);\r\n};\r\n\r\nconst placeSelectedBuilding = props => {\r\n    props.placeBuilding();\r\n    props.changeMessage(message.successfulBuildingPlacement);\r\n}\r\n\r\nconst nextRound = (props) => {\r\n    switch (props.phase) {\r\n\r\n        case BUILDING_PHASE:\r\n            props.clearSelection();\r\n            //check is it empty squares\r\n            if (props.board.indexes.find(i => props.board[i] === EMPTY_SQUARE)) {\r\n                props.changePhaseTo(RESOURCE_PHASE);\r\n                //   this.props.changeMessage(message.selectResource);\r\n            } else {\r\n                props.changeMessage(\"Переходим к кормежке?\");\r\n                props.feedCottages(\r\n                    calcFedCottages(props.board, props.buildings)\r\n                );\r\n                props.changePhaseTo(FEEDING_PHASE);\r\n            }\r\n            break;\r\n\r\n        case FEEDING_PHASE:\r\n            props.changePhaseTo(SCORING_PHASE);\r\n            props.changeMessage(\"Переходим к подсчету очков?\");\r\n            break;\r\n\r\n        case SCORING_PHASE:\r\n            props.changePhaseTo(BUILDING_PHASE);\r\n            props.changeMessage(\"начинаем новую игру\");\r\n            props.newGame();\r\n            break;\r\n\r\n        default:\r\n            props.changeMessage('зачем нажимать? - нужно лочить кнопку!!!');\r\n    }\r\n};\r\n\r\nconst renderActionHelper = props => {\r\n    if (props.phase === RESOURCE_PHASE) {\r\n        if (!props.selectedPawn.type && !props.selectedSquare) {\r\n            props.changeMessage(message.selectResourceAndPlace);\r\n        } else if (!props.selectedPawn.type) {\r\n            props.changeMessage(message.selectResource);\r\n\r\n        } else if (!props.selectedSquare) {\r\n            props.changeMessage(message.placeResource(props.selectedPawn.title.toLowerCase()));\r\n        } else {\r\n            props.changeMessage(message.confirmResourcePlacement(props.selectedPawn.title.toLowerCase()));\r\n\r\n            return <button onClick={() => placeSelectedResource(props)}> PLACE</button>\r\n        }\r\n\r\n    } else {\r\n\r\n        if (props.selectedPawn.type >= 0 && props.selectedSquare) {\r\n            return (\r\n                <>\r\n                    <button onClick={() => nextRound(props)}>NEXT</button>\r\n                    <button onClick={() => placeSelectedBuilding(props)}> PLACE</button>\r\n                </>\r\n            );\r\n        }\r\n        return <button onClick={() => nextRound(props)}>NEXT</button>;\r\n    }\r\n}\r\n\r\nconst renderButtons = props => {\r\n    //if board is full\r\n\r\n    if (!props.board.indexes.find(i => props.board[i] === EMPTY_SQUARE)) {\r\n        return <button onClick={\r\n            () => {\r\n                props.changeMessage(\"Переходим к кормежке?\");\r\n                props.feedCottages(\r\n                    calcFedCottages(props.board, props.buildings)\r\n                );\r\n                props.changePhaseTo(FEEDING_PHASE);\r\n            }\r\n        }>NEXT</button>;\r\n    }\r\n\r\n    if(props.selectedSquare) {\r\n        if (props.selectedPawn.type === RESOURCE) {\r\n            return <button onClick={() => placeSelectedResource(props)}> PLACE RESOURCE</button>;\r\n        } else if (props.selectedPawn.type >= 0) {\r\n           return <button onClick={() => placeSelectedBuilding(props)}> PLACE BUILDING</button>;\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\nconst ToolbarWithResources = props => {\r\n    return (\r\n        <div className=\"resourceSelector\">\r\n            Resources\r\n            <Resource id={0} />\r\n            <Resource id={1} />\r\n            <Resource id={2} />\r\n            {props.message} <br />\r\n\r\n            {renderButtons(props)}\r\n\r\n\r\n\r\n            {renderActionHelper(props)}\r\n\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        selectedPawn: state.selectedPawn,\r\n        selectedSquare: state.selectedSquare,\r\n        phase: state.phase,\r\n        board: state.board,\r\n        buildings: state.buildings,\r\n        message: state.message\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, { changePhaseTo, placeResource, clearSelection, changeMessage, placeBuilding, feedCottages, newGame })(ToolbarWithResources);"]},"metadata":{},"sourceType":"module"}