{"ast":null,"code":"var _jsxFileName = \"D:\\\\Pro\\\\React\\\\tlt\\\\src\\\\components\\\\Buildings\\\\Building.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { fetchBuilding, selectPawn, changeMessage } from '../../actions';\nimport data from './buildings.json';\nimport { message, BUILDING_PHASE, SCORING_PHASE } from './../constants';\nimport { calcScore } from './scoring';\n\nclass Building extends React.Component {\n  testMe() {\n    const moveTo11 = arr => {\n      const dx = Math.min(...arr.map(point => Number(point.x))) - 1;\n      const dy = Math.min(...arr.map(point => Number(point.y))) - 1;\n      arr.forEach(point => {\n        point.x -= dx;\n        point.y -= dy;\n      });\n      return this;\n    };\n\n    const pointToIndex = arr => {\n      return arr.map(point => {\n        const index = point.x.toString() + point.y.toString();\n        console.log(index);\n        return [index, point.resource];\n      }).sort((a, b) => {\n        return a[0] - b[0];\n      });\n    };\n\n    const rotate = arr => arr.map(point => {\n      return {\n        x: -point.y,\n        y: point.x,\n        resource: point.resource\n      };\n    });\n\n    const mirrorX = arr => arr.map(point => {\n      return {\n        x: -point.x,\n        y: point.y,\n        resource: point.resource\n      };\n    });\n\n    const mirrorY = arr => arr.map(point => {\n      return {\n        x: point.x,\n        y: -point.y,\n        resource: point.resource\n      };\n    });\n\n    console.log(pointToIndex(this.props.building.pattern)); //console.log(rotate(this.props.building.pattern).moveTo11());\n\n    console.log(moveTo11(mirrorX(this.props.building.pattern)));\n    console.log(moveTo11(mirrorY(this.props.building.pattern)));\n  }\n\n  selectBuilding() {\n    if (this.props.phase === BUILDING_PHASE) {\n      if (this.props.selectedPattern.length && \"Pattern is OK\") {\n        this.props.selectPawn(this.props.building);\n      }\n\n      this.props.changeMessage(message.selectSquareForBuilding(this.props.building.title, this.props.selectedPattern.length));\n    }\n  }\n\n  componentDidMount() {\n    this.props.fetchBuilding(data[this.props.title]);\n  }\n\n  renderScoring() {\n    if (this.props.phase === SCORING_PHASE) {\n      return calcScore[this.props.building.title](this.props.board);\n    }\n\n    ;\n  }\n\n  render() {\n    if (!this.props.building) {\n      return null;\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: () => this.selectBuilding(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, this.props.building.title), this.renderScoring(), React.createElement(\"button\", {\n        onClick: () => this.testMe(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, \" testMe \"));\n    }\n  }\n\n}\n\n;\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    phase: state.phase,\n    building: state.buildings[ownProps.index],\n    selectedPattern: state.selectedPattern,\n    board: state.board\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchBuilding,\n  selectPawn,\n  changeMessage\n})(Building);","map":{"version":3,"sources":["D:\\Pro\\React\\tlt\\src\\components\\Buildings\\Building.js"],"names":["React","connect","fetchBuilding","selectPawn","changeMessage","data","message","BUILDING_PHASE","SCORING_PHASE","calcScore","Building","Component","testMe","moveTo11","arr","dx","Math","min","map","point","Number","x","dy","y","forEach","pointToIndex","index","toString","console","log","resource","sort","a","b","rotate","mirrorX","mirrorY","props","building","pattern","selectBuilding","phase","selectedPattern","length","selectSquareForBuilding","title","componentDidMount","renderScoring","board","render","mapStateToProps","state","ownProps","buildings"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,SAASC,aAAT,EAAwBC,UAAxB,EAAoCC,aAApC,QAAyD,eAAzD;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,SAASC,OAAT,EAAkBC,cAAlB,EAAkCC,aAAlC,QAAuD,gBAAvD;AACA,SAASC,SAAT,QAA0B,WAA1B;;AAIA,MAAMC,QAAN,SAAuBV,KAAK,CAACW,SAA7B,CAAuC;AAEnCC,EAAAA,MAAM,GAAG;AACL,UAAMC,QAAQ,GAAGC,GAAG,IAAI;AACpB,YAAMC,EAAE,GAAGC,IAAI,CAACC,GAAL,CAAS,GAAGH,GAAG,CAACI,GAAJ,CAAQC,KAAK,IAAIC,MAAM,CAACD,KAAK,CAACE,CAAP,CAAvB,CAAZ,IAAiD,CAA5D;AACA,YAAMC,EAAE,GAAGN,IAAI,CAACC,GAAL,CAAS,GAAGH,GAAG,CAACI,GAAJ,CAAQC,KAAK,IAAIC,MAAM,CAACD,KAAK,CAACI,CAAP,CAAvB,CAAZ,IAAiD,CAA5D;AACAT,MAAAA,GAAG,CAACU,OAAJ,CAAYL,KAAK,IAAI;AACjBA,QAAAA,KAAK,CAACE,CAAN,IAAWN,EAAX;AACAI,QAAAA,KAAK,CAACI,CAAN,IAAWD,EAAX;AACH,OAHD;AAIA,aAAO,IAAP;AACH,KARD;;AAUA,UAAMG,YAAY,GAAGX,GAAG,IAAI;AACxB,aAAOA,GAAG,CAACI,GAAJ,CAAQC,KAAK,IAAI;AACpB,cAAMO,KAAK,GAAGP,KAAK,CAACE,CAAN,CAAQM,QAAR,KAAqBR,KAAK,CAACI,CAAN,CAAQI,QAAR,EAAnC;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYH,KAAZ;AACA,eAAO,CAACA,KAAD,EAAQP,KAAK,CAACW,QAAd,CAAP;AACH,OAJM,EAIJC,IAJI,CAIC,CAACC,CAAD,EAAGC,CAAH,KAAS;AAAC,eAAOD,CAAC,CAAC,CAAD,CAAD,GAAOC,CAAC,CAAC,CAAD,CAAf;AAAmB,OAJ9B,CAAP;AAOH,KARD;;AAUA,UAAMC,MAAM,GAAGpB,GAAG,IAAIA,GAAG,CAACI,GAAJ,CAAQC,KAAK,IAAI;AAAE,aAAO;AAAEE,QAAAA,CAAC,EAAE,CAACF,KAAK,CAACI,CAAZ;AAAeA,QAAAA,CAAC,EAAEJ,KAAK,CAACE,CAAxB;AAA2BS,QAAAA,QAAQ,EAAEX,KAAK,CAACW;AAA3C,OAAP;AAA8D,KAAjF,CAAtB;;AAEA,UAAMK,OAAO,GAAGrB,GAAG,IAAIA,GAAG,CAACI,GAAJ,CAAQC,KAAK,IAAI;AAAE,aAAO;AAAEE,QAAAA,CAAC,EAAE,CAACF,KAAK,CAACE,CAAZ;AAAeE,QAAAA,CAAC,EAAEJ,KAAK,CAACI,CAAxB;AAA2BO,QAAAA,QAAQ,EAAEX,KAAK,CAACW;AAA3C,OAAP;AAA8D,KAAjF,CAAvB;;AAEA,UAAMM,OAAO,GAAGtB,GAAG,IAAIA,GAAG,CAACI,GAAJ,CAAQC,KAAK,IAAI;AAAE,aAAO;AAAEE,QAAAA,CAAC,EAAEF,KAAK,CAACE,CAAX;AAAcE,QAAAA,CAAC,EAAE,CAACJ,KAAK,CAACI,CAAxB;AAA2BO,QAAAA,QAAQ,EAAEX,KAAK,CAACW;AAA3C,OAAP;AAA8D,KAAjF,CAAvB;;AAEAF,IAAAA,OAAO,CAACC,GAAR,CAAYJ,YAAY,CAAC,KAAKY,KAAL,CAAWC,QAAX,CAAoBC,OAArB,CAAxB,EA3BK,CA6BL;;AAEAX,IAAAA,OAAO,CAACC,GAAR,CAAYhB,QAAQ,CAACsB,OAAO,CAAC,KAAKE,KAAL,CAAWC,QAAX,CAAoBC,OAArB,CAAR,CAApB;AACAX,IAAAA,OAAO,CAACC,GAAR,CAAYhB,QAAQ,CAACuB,OAAO,CAAC,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,OAArB,CAAR,CAApB;AAEH;;AAEDC,EAAAA,cAAc,GAAG;AACb,QAAI,KAAKH,KAAL,CAAWI,KAAX,KAAqBlC,cAAzB,EAAyC;AACrC,UAAI,KAAK8B,KAAL,CAAWK,eAAX,CAA2BC,MAA3B,IAAqC,eAAzC,EAA0D;AACtD,aAAKN,KAAL,CAAWlC,UAAX,CAAsB,KAAKkC,KAAL,CAAWC,QAAjC;AAEH;;AACD,WAAKD,KAAL,CAAWjC,aAAX,CAAyBE,OAAO,CAACsC,uBAAR,CAAgC,KAAKP,KAAL,CAAWC,QAAX,CAAoBO,KAApD,EAA2D,KAAKR,KAAL,CAAWK,eAAX,CAA2BC,MAAtF,CAAzB;AACH;AACJ;;AAEDG,EAAAA,iBAAiB,GAAG;AAChB,SAAKT,KAAL,CAAWnC,aAAX,CAAyBG,IAAI,CAAC,KAAKgC,KAAL,CAAWQ,KAAZ,CAA7B;AACH;;AAEDE,EAAAA,aAAa,GAAG;AACZ,QAAI,KAAKV,KAAL,CAAWI,KAAX,KAAqBjC,aAAzB,EAAwC;AACpC,aAAOC,SAAS,CAAC,KAAK4B,KAAL,CAAWC,QAAX,CAAoBO,KAArB,CAAT,CAAqC,KAAKR,KAAL,CAAWW,KAAhD,CAAP;AACH;;AAAA;AACJ;;AAEDC,EAAAA,MAAM,GAAG;AACL,QAAI,CAAC,KAAKZ,KAAL,CAAWC,QAAhB,EAA0B;AACtB,aAAO,IAAP;AACH,KAFD,MAEO;AACH,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,OAAO,EAAE,MAAM,KAAKE,cAAL,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA+C,KAAKH,KAAL,CAAWC,QAAX,CAAoBO,KAAnE,CADJ,EAEK,KAAKE,aAAL,EAFL,EAGI;AAAQ,QAAA,OAAO,EAAE,MAAM,KAAKnC,MAAL,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ,CADJ;AAOH;AACJ;;AAtEkC;;AAwEtC;;AAED,MAAMsC,eAAe,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB;AACzC,SAAO;AACHX,IAAAA,KAAK,EAAEU,KAAK,CAACV,KADV;AAEHH,IAAAA,QAAQ,EAAEa,KAAK,CAACE,SAAN,CAAgBD,QAAQ,CAAC1B,KAAzB,CAFP;AAGHgB,IAAAA,eAAe,EAAES,KAAK,CAACT,eAHpB;AAIHM,IAAAA,KAAK,EAAEG,KAAK,CAACH;AAJV,GAAP;AAMH,CAPD;;AASA,eAAe/C,OAAO,CAACiD,eAAD,EAAkB;AAAEhD,EAAAA,aAAF;AAAiBC,EAAAA,UAAjB;AAA6BC,EAAAA;AAA7B,CAAlB,CAAP,CAAuEM,QAAvE,CAAf","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { fetchBuilding, selectPawn, changeMessage } from '../../actions';\r\nimport data from './buildings.json';\r\nimport { message, BUILDING_PHASE, SCORING_PHASE } from './../constants';\r\nimport { calcScore } from './scoring';\r\n\r\n\r\n\r\nclass Building extends React.Component {\r\n\r\n    testMe() {\r\n        const moveTo11 = arr => {\r\n            const dx = Math.min(...arr.map(point => Number(point.x))) - 1;\r\n            const dy = Math.min(...arr.map(point => Number(point.y))) - 1;\r\n            arr.forEach(point => {\r\n                point.x -= dx;\r\n                point.y -= dy;\r\n            });\r\n            return this;\r\n        }\r\n\r\n        const pointToIndex = arr => {\r\n            return arr.map(point => {\r\n                const index = point.x.toString() + point.y.toString();\r\n                console.log(index);\r\n                return [index, point.resource]\r\n            }).sort((a,b) => {return a[0] - b[0]});\r\n\r\n\r\n        }\r\n\r\n        const rotate = arr => arr.map(point => { return { x: -point.y, y: point.x, resource: point.resource } });\r\n\r\n        const mirrorX = arr => arr.map(point => { return { x: -point.x, y: point.y, resource: point.resource } });\r\n\r\n        const mirrorY = arr => arr.map(point => { return { x: point.x, y: -point.y, resource: point.resource } });\r\n\r\n        console.log(pointToIndex(this.props.building.pattern));\r\n\r\n        //console.log(rotate(this.props.building.pattern).moveTo11());\r\n\r\n        console.log(moveTo11(mirrorX(this.props.building.pattern)));\r\n        console.log(moveTo11(mirrorY(this.props.building.pattern)));\r\n\r\n    }\r\n\r\n    selectBuilding() {\r\n        if (this.props.phase === BUILDING_PHASE) {\r\n            if (this.props.selectedPattern.length && \"Pattern is OK\") {\r\n                this.props.selectPawn(this.props.building);\r\n\r\n            }\r\n            this.props.changeMessage(message.selectSquareForBuilding(this.props.building.title, this.props.selectedPattern.length));\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.fetchBuilding(data[this.props.title]);\r\n    }\r\n\r\n    renderScoring() {\r\n        if (this.props.phase === SCORING_PHASE) {\r\n            return calcScore[this.props.building.title](this.props.board)\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.building) {\r\n            return null;\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <button onClick={() => this.selectBuilding()}>{this.props.building.title}</button>\r\n                    {this.renderScoring()}\r\n                    <button onClick={() => this.testMe()}> testMe </button>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        phase: state.phase,\r\n        building: state.buildings[ownProps.index],\r\n        selectedPattern: state.selectedPattern,\r\n        board: state.board\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchBuilding, selectPawn, changeMessage })(Building);\r\n"]},"metadata":{},"sourceType":"module"}