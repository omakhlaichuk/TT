{"ast":null,"code":"var _jsxFileName = \"D:\\\\Pro\\\\React\\\\tlt\\\\src\\\\components\\\\Buildings\\\\Building.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { fetchBuilding, selectPawn, changeMessage } from '../../actions';\nimport data from './buildings.json';\nimport { message, BUILDING_PHASE, SCORING_PHASE } from './../constants';\nimport { calcScore } from './scoring';\n\nclass Building extends React.Component {\n  selectBuilding() {\n    if (this.props.phase === BUILDING_PHASE) {\n      if (this.props.selectedPattern.length && \"Pattern is OK\") {\n        this.props.selectPawn(this.props.building);\n      }\n\n      this.props.changeMessage(message.selectSquareForBuilding(this.props.building.title, this.props.selectedPattern.length));\n    }\n  }\n\n  componentDidMount() {\n    this.props.fetchBuilding(data[this.props.title]);\n    console.log(this.props.building);\n  }\n\n  renderScoring() {\n    if (this.props.phase === SCORING_PHASE) {\n      console.log(this.props.building.title);\n      return calcScore[this.props.building.title](this.props.board);\n    }\n\n    ;\n  }\n\n  render() {\n    if (!this.props.building) {\n      return null;\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: () => this.selectBuilding(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, this.props.building.title), this.renderScoring());\n    }\n  }\n\n}\n\n;\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    phase: state.phase,\n    building: state.buildings[ownProps.index],\n    selectedPattern: state.selectedPattern,\n    board: state.board\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchBuilding,\n  selectPawn,\n  changeMessage\n})(Building);","map":{"version":3,"sources":["D:\\Pro\\React\\tlt\\src\\components\\Buildings\\Building.js"],"names":["React","connect","fetchBuilding","selectPawn","changeMessage","data","message","BUILDING_PHASE","SCORING_PHASE","calcScore","Building","Component","selectBuilding","props","phase","selectedPattern","length","building","selectSquareForBuilding","title","componentDidMount","console","log","renderScoring","board","render","mapStateToProps","state","ownProps","buildings","index"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AAEA,SAASC,aAAT,EAAwBC,UAAxB,EAAoCC,aAApC,QAAyD,eAAzD;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,SAASC,OAAT,EAAkBC,cAAlB,EAAkCC,aAAlC,QAAuD,gBAAvD;AACA,SAASC,SAAT,QAA0B,WAA1B;;AAIA,MAAMC,QAAN,SAAuBV,KAAK,CAACW,SAA7B,CAAuC;AAEnCC,EAAAA,cAAc,GAAG;AACb,QAAI,KAAKC,KAAL,CAAWC,KAAX,KAAqBP,cAAzB,EAAyC;AACrC,UAAI,KAAKM,KAAL,CAAWE,eAAX,CAA2BC,MAA3B,IAAsC,eAA1C,EAA2D;AACvD,aAAKH,KAAL,CAAWV,UAAX,CAAsB,KAAKU,KAAL,CAAWI,QAAjC;AAEH;;AACD,WAAKJ,KAAL,CAAWT,aAAX,CAAyBE,OAAO,CAACY,uBAAR,CAAgC,KAAKL,KAAL,CAAWI,QAAX,CAAoBE,KAApD,EAA2D,KAAKN,KAAL,CAAWE,eAAX,CAA2BC,MAAtF,CAAzB;AACH;AACJ;;AAEDI,EAAAA,iBAAiB,GAAG;AAChB,SAAKP,KAAL,CAAWX,aAAX,CAAyBG,IAAI,CAAC,KAAKQ,KAAL,CAAWM,KAAZ,CAA7B;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKT,KAAL,CAAWI,QAAvB;AACH;;AAEDM,EAAAA,aAAa,GAAG;AACZ,QAAI,KAAKV,KAAL,CAAWC,KAAX,KAAqBN,aAAzB,EAAwC;AACrCa,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKT,KAAL,CAAWI,QAAX,CAAoBE,KAAhC;AACC,aAAOV,SAAS,CAAC,KAAKI,KAAL,CAAWI,QAAX,CAAoBE,KAArB,CAAT,CAAqC,KAAKN,KAAL,CAAWW,KAAhD,CAAP;AACH;;AAAA;AACJ;;AAEDC,EAAAA,MAAM,GAAG;AACL,QAAI,CAAC,KAAKZ,KAAL,CAAWI,QAAhB,EAA0B;AACtB,aAAO,IAAP;AACH,KAFD,MAEO;AACH,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,OAAO,EAAE,MAAM,KAAKL,cAAL,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA+C,KAAKC,KAAL,CAAWI,QAAX,CAAoBE,KAAnE,CADJ,EAEM,KAAKI,aAAL,EAFN,CADJ;AAMH;AACJ;;AAnCkC;;AAqCtC;;AAED,MAAMG,eAAe,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB;AACzC,SAAO;AACHd,IAAAA,KAAK,EAAEa,KAAK,CAACb,KADV;AAEHG,IAAAA,QAAQ,EAAEU,KAAK,CAACE,SAAN,CAAgBD,QAAQ,CAACE,KAAzB,CAFP;AAGHf,IAAAA,eAAe,EAAEY,KAAK,CAACZ,eAHpB;AAIHS,IAAAA,KAAK,EAAEG,KAAK,CAACH;AAJV,GAAP;AAMH,CAPD;;AASA,eAAevB,OAAO,CAACyB,eAAD,EAAkB;AAAExB,EAAAA,aAAF;AAAiBC,EAAAA,UAAjB;AAA6BC,EAAAA;AAA7B,CAAlB,CAAP,CAAuEM,QAAvE,CAAf","sourcesContent":["import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { fetchBuilding, selectPawn, changeMessage } from '../../actions';\r\nimport data from './buildings.json';\r\nimport { message, BUILDING_PHASE, SCORING_PHASE } from './../constants';\r\nimport { calcScore } from './scoring';\r\n\r\n\r\n\r\nclass Building extends React.Component {\r\n\r\n    selectBuilding() {\r\n        if (this.props.phase === BUILDING_PHASE) {\r\n            if (this.props.selectedPattern.length  && \"Pattern is OK\") {\r\n                this.props.selectPawn(this.props.building);\r\n\r\n            }\r\n            this.props.changeMessage(message.selectSquareForBuilding(this.props.building.title, this.props.selectedPattern.length ));\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.fetchBuilding(data[this.props.title]);\r\n        console.log(this.props.building);\r\n    }\r\n\r\n    renderScoring() {\r\n        if (this.props.phase === SCORING_PHASE) {\r\n           console.log(this.props.building.title);\r\n            return calcScore[this.props.building.title](this.props.board)\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.building) {\r\n            return null;\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <button onClick={() => this.selectBuilding()}>{this.props.building.title}</button>\r\n                    { this.renderScoring() } \r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        phase: state.phase,\r\n        building: state.buildings[ownProps.index],\r\n        selectedPattern: state.selectedPattern,\r\n        board: state.board\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchBuilding, selectPawn, changeMessage })(Building);\r\n"]},"metadata":{},"sourceType":"module"}